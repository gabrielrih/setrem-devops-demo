services:
  app:
    build:
      context: ../
      dockerfile: ./docker/Dockerfile.app
    ports:
      - 5000:5000
    networks:
      default:
        aliases:
          - my-ip.dev
  unit_test:
    build: 
      context: ../
      dockerfile: ./docker/Dockerfile.test
    depends_on:
      - app
    command: coverage run -a -m pytest ./test/unit
    volumes:
      - ../:/app
  integration_test:
    build: 
      context: ../
      dockerfile: ./docker/Dockerfile.test
    depends_on:
      - app
    command: coverage run -a -m pytest ./test/integration
    volumes:
      - ../:/app